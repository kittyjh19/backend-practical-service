# 📚 REST API 명세서

본 문서는 **기존 운영 중인 Spring Boot 기반 REST API 서비스**의
엔드포인트 구조와 요청/응답 스펙을 **실제 코드 분석을 기반으로** 정리한 문서입니다.

본 프로젝트는 신규 기능 개발이 아닌,
**기존 코드에 합류한 신입 백엔드 개발자 관점에서 서비스 구조를 이해하고 문서화하는 것**을 목표로 하고 있습니다.

현재 단계에서는 **Post(게시글) 도메인 중심의 핵심 API**를 우선적으로 문서화하였으며,
게시글 좋아요 및 인기글 조회 기능은 **설계 확장 관점에서 문서에 반영**되었습니다.
향후 유지보수 및 배포 단계에서 Swagger(OpenAPI) 적용을 고려하고 있습니다.

---

## 🔧 공통 사항

* Base URL: `/api`
* Content-Type: `application/json`
* 인증/인가: 현재 코드 기준 별도 인증 처리 없음

---

## 📝 게시글(Post) API

---

### 1️⃣ 게시글 생성

게시글을 생성합니다.

**URL**

```
/api/posts
```

**Method**

```
POST
```

---

### Request Body

```json
{
  "userId": 1,
  "title": "게시글 제목",
  "content": "게시글 내용"
}
```

| 필드명     | 타입     | 필수 | 설명              |
| ------- | ------ | -- | --------------- |
| userId  | Long   | O  | 작성자 사용자 ID      |
| title   | String | O  | 게시글 제목 (1~100자) |
| content | String | O  | 게시글 내용          |

---

### 처리 흐름 요약

* 요청으로 전달된 사용자 ID로 작성자(User) 조회
* 게시글(Post) 엔티티 생성
* 게시글 저장 후 응답 DTO 반환

---

### Success Response

```
HTTP/1.1 200 OK
```

```json
{
  "id": 1,
  "authorId": 1,
  "author": "작성자 이름",
  "title": "게시글 제목",
  "content": "게시글 내용",
  "createdAt": "2024-01-01T12:00:00",
  "updatedAt": "2024-01-01T12:00:00"
}
```

---

### 2️⃣ 게시글 단건 조회

게시글을 단건 조회합니다.

**URL**

```
/api/posts/{id}
```

**Method**

```
GET
```

---

### Path Variable

| 이름 | 타입   | 설명     |
| -- | ---- | ------ |
| id | Long | 게시글 ID |

---

### 처리 흐름 요약

* 게시글 ID로 게시글 조회
* 존재하지 않을 경우 예외 발생
* 게시글 좋아요 수 및 요청 사용자 기준 좋아요 여부 포함

---

### Success Response

```json
{
  "id": 1,
  "authorId": 1,
  "author": "작성자 이름",
  "title": "게시글 제목",
  "content": "게시글 내용",
  "likeCount": 12,
  "likedByMe": true,
  "createdAt": "2024-01-01T12:00:00",
  "updatedAt": "2024-01-01T12:00:00"
}
```

> ※ `likedByMe`는 요청 사용자를 기준으로 계산되는 값입니다.

---

### 3️⃣ 게시글 목록 조회

전체 게시글 목록을 조회합니다.

**URL**

```
/api/posts
```

**Method**

```
GET
```

---

### Query Parameter

| 이름   | 타입     | 설명                       |
| ---- | ------ | ------------------------ |
| sort | String | `latest`(기본값), `popular` |

---

### 처리 흐름 요약

* 게시글 전체 조회
* 정렬 옵션에 따라 게시글 정렬

  * `latest` : 생성일 기준 최신순
  * `popular` : 좋아요 수(`like_count`) 기준 내림차순
* 각 게시글을 Response DTO로 변환하여 반환

---

### Success Response

```json
[
  {
    "id": 1,
    "authorId": 1,
    "author": "작성자 이름",
    "title": "인기 게시글",
    "content": "게시글 내용",
    "likeCount": 42,
    "likedByMe": false,
    "createdAt": "2024-01-01T12:00:00",
    "updatedAt": "2024-01-01T12:00:00"
  }
]
```

---

### 4️⃣ 게시글 수정

게시글을 수정합니다.
**작성자 본인만 수정 가능합니다.**

**URL**

```
/api/posts/{id}
```

**Method**

```
PUT
```

---

### Request Body

```json
{
  "userId": 1,
  "title": "수정된 제목",
  "content": "수정된 내용"
}
```

---

### 처리 흐름 요약

* 게시글 조회
* 요청 사용자와 작성자 일치 여부 검증
* 게시글 제목 및 내용 수정

---

### Success Response

```json
{
  "id": 1,
  "authorId": 1,
  "author": "작성자 이름",
  "title": "수정된 제목",
  "content": "수정된 내용",
  "createdAt": "2024-01-01T12:00:00",
  "updatedAt": "2024-01-02T09:00:00"
}
```

---

### 5️⃣ 게시글 삭제

게시글을 삭제합니다.
**작성자 본인만 삭제 가능합니다.**

**URL**

```
/api/posts/{id}
```

**Method**

```
DELETE
```

---

### Query Parameter

| 이름     | 타입   | 설명        |
| ------ | ---- | --------- |
| userId | Long | 요청 사용자 ID |

---

### 처리 흐름 요약

* 게시글 조회
* 요청 사용자와 작성자 일치 여부 검증
* 게시글 삭제

---

### Success Response

```json
{}
```

---

## ❤️ 6️⃣ 게시글 좋아요 토글 (신규)

게시글에 대한 좋아요를 **토글 방식**으로 처리합니다.
이미 좋아요한 게시글에 다시 요청할 경우 좋아요가 취소됩니다.

---

### URL

```
/api/posts/{postId}/likes
```

### Method

```
POST
```

---

### Path Variable

| 이름     | 타입   | 설명     |
| ------ | ---- | ------ |
| postId | Long | 게시글 ID |

---

### 처리 흐름 요약

* 게시글 조회
* 요청 사용자가 게시글 작성자인 경우 예외 발생
* 사용자–게시글 좋아요 존재 여부 확인

  * 존재 시 → 좋아요 취소
  * 미존재 시 → 좋아요 추가
* 게시글 좋아요 수(`like_count`) 증감 처리

---

### Success Response

```json
{
  "postId": 1,
  "liked": true,
  "likeCount": 13
}
```

---

## ❗ 에러 응답 (코드 분석 기반)

* **400 Bad Request**

  * 요청 값이 유효하지 않은 경우
  * 본인 게시글에 좋아요를 시도한 경우

* **403 Forbidden**

  * 게시글 작성자가 아닌 사용자가 수정 또는 삭제를 시도한 경우

* **404 Not Found**

  * 존재하지 않는 게시글 또는 사용자에 대한 요청

> ※ **401 Unauthorized**는 현재 인증/인가 기능이 구현되어 있지 않아
> 실제로 사용되지 않으며, 추후 인증 기능 도입 시 적용될 수 있습니다.

---

## 📎 참고 사항

* 본 API 명세는 **실제 Controller / Service / DTO 코드를 분석하여 수동 작성**되었습니다.
* 게시글 좋아요 및 인기글 조회 기능은 **설계 확장 기능**으로,
  실제 구현은 추후 단계에서 진행될 수 있습니다.
* 시퀀스 다이어그램은 `docs/sequence/*.puml` 파일로 별도 관리합니다.
* Postman을 통해 주요 API 동작을 직접 검증했습니다.

본 문서는 서비스 분석 및 환경 설정 단계 산출물이며,
이후 예외 처리, 테스트 코드, 성능 이슈를 개선할 예정입니다.


